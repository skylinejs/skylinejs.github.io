"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[128],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=i,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||a;return n?o.createElement(h,r(r({ref:t},u),{},{components:n})):o.createElement(h,r({ref:t},u))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:i,r[1]=l;for(var c=2;c<a;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9119:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(7294),i=n(6010),a=n(5281),r=n(5999),l=n(3709);const s={note:{infimaClassName:"secondary",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 14 16"},o.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))},label:o.createElement(r.Z,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)"},"note")},tip:{infimaClassName:"success",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 12 16"},o.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))},label:o.createElement(r.Z,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)"},"tip")},danger:{infimaClassName:"danger",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 12 16"},o.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))},label:o.createElement(r.Z,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)"},"danger")},info:{infimaClassName:"info",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 14 16"},o.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))},label:o.createElement(r.Z,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)"},"info")},caution:{infimaClassName:"warning",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 16 16"},o.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},label:o.createElement(r.Z,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)"},"caution")}},c={secondary:"note",important:"info",success:"tip",warning:"danger"};function u(e){const{mdxAdmonitionTitle:t,rest:n}=function(e){const t=o.Children.toArray(e),n=t.find((e=>o.isValidElement(e)&&"mdxAdmonitionTitle"===e.props?.mdxType)),i=o.createElement(o.Fragment,null,t.filter((e=>e!==n)));return{mdxAdmonitionTitle:n,rest:i}}(e.children);return{...e,title:e.title??t,children:n}}function d(e){const{children:t,type:n,title:r,icon:d}=u(e),p=function(e){const t=c[e]??e,n=s[t];return n||(console.warn(`No admonition config found for admonition type "${t}". Using Info as fallback.`),s.info)}(n),m=r??p.label,{iconComponent:h}=p,y=d??o.createElement(h,null);return o.createElement("div",{className:(0,i.Z)(a.k.common.admonition,a.k.common.admonitionType(e.type),"alert",`alert--${p.infimaClassName}`,l.Z.admonition)},o.createElement("div",{className:l.Z.admonitionHeading},o.createElement("span",{className:l.Z.admonitionIcon},y),m),o.createElement("div",{className:l.Z.admonitionContent},t))}},444:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>y,contentTitle:()=>m,default:()=>v,frontMatter:()=>p,metadata:()=>h,toc:()=>f});var o,i=n(7462),a=n(7294),r=n(3905),l=n(9119);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(this,arguments)}const c=e=>{let{title:t,titleId:n,...i}=e;return a.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"coffee","aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,o||(o=a.createElement("path",{d:"M17 8h1a4 4 0 1 1 0 8h-1M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4ZM6 2v2M10 2v2M14 2v2"})))};var u=n(9692);function d(e){return"info"!==e.type?a.createElement(l.Z,e):a.createElement("div",{className:u.Z.admonition},a.createElement(l.Z,(0,i.Z)({title:"Info",icon:a.createElement(c,null)},e)))}const p={sidebar_position:1,slug:"/introduction",title:"Introduction"},m="SkylineJS",h={unversionedId:"introduction",id:"introduction",title:"Introduction",description:"The following documentation contains material that may be upsetting to some developers. Proceed with caution and a sense of humor.",source:"@site/docs/introduction.md",sourceDirName:".",slug:"/introduction",permalink:"/docs/introduction",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"/introduction",title:"Introduction"},sidebar:"tutorialSidebar",next:{title:"Environment",permalink:"/docs/environment"}},y={},f=[{value:"Introduction",id:"introduction",level:2},{value:"Avoid complexity",id:"avoid-complexity",level:2},{value:"Framework versus library",id:"framework-versus-library",level:2},{value:"Compile-time versus runtime errors",id:"compile-time-versus-runtime-errors",level:2}],g={toc:f},b="wrapper";function v(e){let{components:t,...o}=e;return(0,r.kt)(b,(0,i.Z)({},g,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"skylinejs"},"SkylineJS"),(0,r.kt)(d,{type:"info",mdxType:"SkylineAdmonition"},"The following documentation contains material that may be upsetting to some developers. Proceed with caution and a sense of humor."),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"SkylineJS is a collection of libraries for building efficient, secure and scalable web applications. It is a companion toolkit to your framework of choice, solving common tasks every web application has to perform such as parsing environment variables, performance monitoring or caching."),(0,r.kt)("p",null,"Instead of building these on your own, SkylineJS provides you with libraries that are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"TypeScript native"),(0,r.kt)("li",{parentName:"ul"},"Zero or minimal dependency"),(0,r.kt)("li",{parentName:"ul"},"Exhaustive test coverage"),(0,r.kt)("li",{parentName:"ul"},"Production tested")),(0,r.kt)("br",null),(0,r.kt)("p",null,"Your current situation might look like this:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Your current situation",src:n(8668).Z,width:"653",height:"972"})),(0,r.kt)("p",null,"This is an undesirable state of existence. SkylineJS was created to guide you out of this chaos in two simple steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Education"),": an in-depth explanation of why you should do something a certain way."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Code"),": provide you with the necessary code to act on the knowledge you just gained.")),(0,r.kt)("p",null,"Have a look at how this might change your situation to the better:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Your new situation",src:n(5083).Z,width:"653",height:"972"})),(0,r.kt)("p",null,"Ideally, your framework + SkylineJS should take care of all the basic scaffolding your application needs, everything else is domain-specific functionality that depends on the particular features you would like to build (e.g., remote controlling your toaster via a REST API)."),(0,r.kt)("p",null,"Each Skyline library can be used on its own. However, all libraries play nicely together because they adhere to the same guiding principles. This coherence makes it easy for a developer to pick up a new Skyline library and use the same patterns to integrate the library into their own codebase. Below is a short introduction into the guiding principles."),(0,r.kt)("h2",{id:"avoid-complexity"},"Avoid complexity"),(0,r.kt)("p",null,"If you are fresh out of university, just compiled your own version of the Arch Linux kernel and are ready to take on the world, just let me say: I understand. I used to be you and there are no words of wisdom that could have kept me from implementing abstract interfaces with 10 generics, write my own API endpoint description language for auto-generating CRUD endpoints or monkey patch npm packages at runtime to modify internal behavior I did not like (yes I know)."),(0,r.kt)("p",null,"However, after years and years of building and maintaining a codebase that is required to create real value to real customers in the real world, I eventually learned a thing or two about code. First and foremost, code does not have an end in itself. The only raison d'\xeatre for your code is that it solves a problem for someone else. If this does not apply to your situation, you can safely close this browser tab and move on."),(0,r.kt)("p",null,"I recommend a strong bias towards simple and repetitive code and against re-usable but complex code. Complexity is created through dependencies and fexibility. With abstractions you create both: The abstraction needs to support multiple use-cases (flexibility) and is used by multiple consumers (dependencies). Just you ",(0,r.kt)("em",{parentName:"p"},"can")," create an abstraction for something does not mean you ",(0,r.kt)("em",{parentName:"p"},"should"),"."),(0,r.kt)("h2",{id:"framework-versus-library"},"Framework versus library"),(0,r.kt)("p",null,'If you are one of those developers that uses the words "Framework" and "Library" interchangeably, stop now. A framework operates under the Hollywood principle: "Don\'t call us - we call you". The framework takes over the flow of the application and calls your code as needed. NestJS is an example of an excellent framework that does all the heavy lifting to create an environment you can easily develop a web server in.'),(0,r.kt)("p",null,"SkylineJS is intentionally designed as a collection of libraries, not a framework. An application can only run a single framework. However, once you have chosen your framework, you need several libraries to solve particular problems like hashing a password or handling file uploads. A library solves one problem without any assumptions about the rest of your application. A framework does the opposite, it takes all these building blocks and is responsible for composing them into an application that achieves a goal e.g., a web server that can authenticate users."),(0,r.kt)("p",null,"Composition is a very delicate endeavour. It creates a lot of dependencies between the modules of your code and is therefore the most brittle part of the codebase. Furthermore, the composition is beholden to the business requirements of the application, which change more often than agile coaches their definition of the word agile. However, composing building blocks into a coherent functionality that reaches a business goal is the only reason that your application exists, so there is no way getting around it."),(0,r.kt)("p",null,"SkylineJS has been architected with this distinction in mind. The APIs are designed such that the developer can rely on the library to solve the problem while keeping full control and flexibility on how to integrate it into the larger picture of the application. The documentation will provide you with many examples on how to achieve this integration using your particular framework."),(0,r.kt)("h2",{id:"compile-time-versus-runtime-errors"},"Compile-time versus runtime errors"),(0,r.kt)("p",null,"The philosophy that permeates each SkylineJS library is that every error that occurs at runtime but could have been detected at compile-time has to be made detectable at compile-time. The biggest productivity drain for a developer is not writing a lot of simple and repetitive code but to spend hours inside a debugger in a non-reproducible environment due to a lack of the aformentioned boring and repetitive code. Remember kids: an interface a day keeps the middle-of-the-night-production-hotfix-sessions away."),(0,r.kt)("p",null,"There are two main ways SkylineJS reduces runtime errors to a minimum:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Leverage the TypeScript compiler"),(0,r.kt)("li",{parentName:"ol"},"Validate runtime values and throw if they are not matching their interface")),(0,r.kt)("p",null,"The following image illustrates the advantage of such an approach:"),(0,r.kt)("br",null),(0,r.kt)("mermaid",{value:'flowchart TB\n    req([HTTP request]) -- validate --\x3e api\n    sql([SQL query]) -- validate ---\x3e da\n    env([Environment variable]) -- validate ---\x3e bl\n    env([Environment variable]) -- validate --\x3e da\n\n    subgraph "Application"\n      api[API layer]\n      bl[Business logic layer]\n      da[Data access layer]\n      api === bl\n      bl === api\n      bl === da\n      da === bl\n    end\n\n    linkStyle 0 stroke:orange;\n    linkStyle 1 stroke:orange;\n    linkStyle 2 stroke:orange;\n    linkStyle 3 stroke:orange;\n    linkStyle 4 stroke:green;\n    linkStyle 5 stroke:green;\n    linkStyle 6 stroke:green;\n    linkStyle 7 stroke:green;'}),(0,r.kt)("br",null),(0,r.kt)("p",null,"As you can see, we create a boundary between your application (the recatangle) and the outer world. Inside the application boundary, everything is under you control. The different components (e.g., API, business logic and data access) can safely talk to each other and rely on each other to fulfill their public interfaces. This assumes that you are correctly leveraging the TypeScript compiler to create type-safe interfaces and contracts instead of casting everywhere and using ",(0,r.kt)("inlineCode",{parentName:"p"},"any")," inflationary."),(0,r.kt)("p",null,'While TypeScript can ensure that no runtime errors happen when passing data between the type-safe components of your application, the data might still have an "unsafe" origin. An example for an origin that cannot be validated by the TypeScript compiler is the result of an SQL query. While you can specify an interface for the result data, the SQL query might still return totally different data at runtime. This can lead to issues that are difficult to debug, so we should fix the root cause by validating that the result of the SQL query machtes the TypeScript interface. We can accomplish this by using JSON schema validation without introducing any real performance penalty (e.g., by using the ',(0,r.kt)("inlineCode",{parentName:"p"},"ajv")," library). The same approach can and should be taken for all other unsafe sources of runtime values such as environment variables or HTTP requests."),(0,r.kt)("p",null,'I call this approach "end-to-end type safety". If you can rely on the runtime values to match their TypeScript interface - because you validate them when they enter your application boundary - and your application ensures the correct accessing and passing of such values using TypeScript, you pretty much eliminate all runtime errors. Of course there are always edge-cases that slip through, but you should be able to reduce the time you spend inside a debugger by 90+ percent. Note that this approach works best when you leverage as many TypeScript features as possible, such as the ',(0,r.kt)("inlineCode",{parentName:"p"},"strictNullChecks")," option (highly recommended!). You can read more about useful TypeScript compiler options here: ",(0,r.kt)("a",{parentName:"p",href:"/blog/best-of-typescript-compiler-options"},"Best of TypeScript compiler options"),"."))}v.isMDXComponent=!0},3709:(e,t,n)=>{n.d(t,{Z:()=>o});const o={admonition:"admonition_LlT9",admonitionHeading:"admonitionHeading_tbUL",admonitionIcon:"admonitionIcon_kALy",admonitionContent:"admonitionContent_S0QG"};var i=n(4783)(e.id,{esModule:!0,locals:!0});e.hot.dispose(i)},9692:(e,t,n)=>{n.d(t,{Z:()=>o});const o={admonition:"admonition_R2X5"};var i=n(4783)(e.id,{esModule:!0,locals:!0});e.hot.dispose(i)},5083:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/le-new-situation-578c194b3796449aae6a9fb4041c44a4.png"},8668:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/le-situation-1e7ffb02944250f0bce2d8032f4c1241.png"}}]);