"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8082],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=i,h=m["".concat(s,".").concat(d)]||m[d]||u[d]||a;return n?r.createElement(h,o(o({ref:t},c),{},{components:n})):r.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3783:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var r=n(7462),i=(n(7294),n(3905));const a={},o="Email",l={unversionedId:"email",id:"email",title:"Email",description:'Despite the yearly announcement that "email is dead", every server application continues to send out emails.',source:"@site/docs/email.md",sourceDirName:".",slug:"/email",permalink:"/docs/email",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"@skyline-js/cache",permalink:"/docs/api-reference/cache"},next:{title:"Healthcheck",permalink:"/docs/healthcheck"}},s={},p=[{value:"MJML",id:"mjml",level:2},{value:"Testing",id:"testing",level:2}],c={toc:p},m="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"email"},"Email"),(0,i.kt)("p",null,'Despite the yearly announcement that "email is dead", every server application continues to send out emails.'),(0,i.kt)("h2",{id:"mjml"},"MJML"),(0,i.kt)("p",null,"Mjml is a good balance in complexity and power, does all the email legacy and responsive stuff\nPreview in VSCode / Standalone which is nice\nSimple imoprt system for sharing components like header/ footer"),(0,i.kt)("h1",{id:"compile-and-type-safety"},"Compile and type-safety"),(0,i.kt)("p",null,"Do NOT copile mjml to html at runtime. This process is very compute intensive, complex and error prone. There is no benefit of doing this every time you send an email.\nSo you want to compile this and then use the result for sending emails."),(0,i.kt)("p",null,'How to we prevent tokens not being filled?\nEveryone received such an email i nthe past" Hello {{username}}". How do we garantuee that this does not happen?'),(0,i.kt)("p",null,"The email package compiles the mjml to html. Then it parses the template syntax e.g., handlebars and transforms the html to a functoin that takes those as parameters. THis way we achieve type-safety."),(0,i.kt)("p",null,"Note:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"keep your .mjml file inside the module that it is being used. Otherwise if you delete the module the template will still be there, this is more coherent.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Register post-processing routines")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"html to text for better deliverability"))),(0,i.kt)("h2",{id:"testing"},"Testing"),(0,i.kt)("p",null,"email has a lot of steps and components/ infra in between you sending and the user receiving. Most of the time, it is ciritcal to the application (.e.g, registraiotn email)"),(0,i.kt)("p",null,"Therefore paramount to test emails.\nYou can use mailhog for this as a local SMTP server for DEV/ CI.\nHowever, mailhog api is not good for reliable tests, so this package provides you with the necessary utilities."))}u.isMDXComponent=!0}}]);